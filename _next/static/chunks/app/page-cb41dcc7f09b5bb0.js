(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9144:function(t,e,n){Promise.resolve().then(n.bind(n,5233))},5233:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return V}});var r,s,i,a,o=n(7437),c=n(2265);class l{async execute(t){return await this.repository.create(t)}constructor(t){this.repository=t}}class d{async execute(t){return await this.repository.delete(t.id)}constructor(t){this.repository=t}}class u{async execute(){return await this.repository.findAll()}constructor(t){this.repository=t}}class h{async execute(t){return await this.repository.update(t.id,t)}constructor(t){this.repository=t}}var m=n(6731);(r=i||(i={})).CREATED="created",r.DELETED="deleted",r.UPDATED="updated";class p{async create(t){let e=new l(this.repository),n=await e.execute(t);return n&&this.eventEmitter.emit("created",t),n}async delete(t){let e=new d(this.repository),n=await e.execute(t);return n&&this.eventEmitter.emit("deleted",t),n}async findAll(){let t=new u(this.repository);return await t.execute()}async update(t){let e=new h(this.repository),n=await e.execute(t);return n&&this.eventEmitter.emit("updated",t),n}constructor(t){this.repository=t,this.eventEmitter=new m.EventEmitter}}class x{async findOne(t){let e=this.items.find(e=>e.id===t);if(!e)throw Error("Item with id ".concat(t," not found"));return e}async findAll(){return this.items}async create(t){return this.items.push(t),!0}async update(t,e){let n=this.items.findIndex(e=>e.id===t);return!(n<0)&&(this.items[n]=e,!0)}async delete(t){let e=this.items.findIndex(e=>e.id===t);return!(e<0)&&(this.items.splice(e,1),!0)}constructor(){this.items=[]}}class f{getItems(){let t=localStorage.getItem(this.itemsKey);return t?JSON.parse(t):[]}setItems(t){localStorage.setItem(this.itemsKey,JSON.stringify(t))}async findOne(t){let e=this.getItems().find(e=>e.id===t);if(!e)throw Error("Item with id ".concat(t," not found"));return e}async findAll(){return this.getItems()}async create(t){let e=this.getItems();return e.push(t),this.setItems(e),!0}async update(t,e){let n=this.getItems(),r=n.findIndex(e=>e.id===t);return!(r<0)&&(n[r]=e,this.setItems(n),!0)}async delete(t){let e=this.getItems(),n=e.findIndex(e=>e.id===t);return!(n<0)&&(e.splice(n,1),this.setItems(e),!0)}constructor(t="todo-items"){this.itemsKey=t}}class y{async findOne(t){return await this.dataSource.findOne(t)}async findAll(){return await this.dataSource.findAll()}async create(t){return await this.dataSource.create(t)}async update(t,e){return await this.dataSource.update(t,e)}async delete(t){return await this.dataSource.delete(t)}constructor(t,e){this.name="GenericRepository",this.name=t,this.dataSource=e}}class v extends y{constructor(t){super("TodoItemRepository",t)}}class j{}(s=a||(a={}))[s.Memory=0]="Memory",s[s.LocalStorage=1]="LocalStorage";class g extends j{create(t){let e;switch(t){case 0:e=new x;break;case 1:e=new f;break;default:throw Error("Invalid type")}return new p(new v(e))}}let E=(0,c.createContext)({}),w=new g().create(a.LocalStorage),I=t=>{let{children:e}=t;return(0,o.jsx)(E.Provider,{value:{todoItemController:w},children:e})},Z=()=>(0,c.useContext)(E);function D(t){let{children:e}=t;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(I,{children:e})})}var S=n(2197),b=n(511),C=n(8929),T=n(2284),A=n(6548);class k{constructor(t){this.id=t,this.createdAt=new Date,this.updatedAt=new Date}}class O extends k{constructor(t,e,n){super(t),this.title=e,this.description=n}}function P(){let[t,e]=(0,c.useState)(""),[n,r]=(0,c.useState)(""),[s,i]=(0,c.useState)(""),{todoItemController:a}=Z();return(0,o.jsx)("form",{onSubmit:o=>{o.preventDefault(),o.stopPropagation();let c=new O(t,n,s);a.create(c).then(t=>{t&&(e(""),r(""),i(""))})},children:(0,o.jsxs)(C.Z,{sx:{paddingBottom:2},spacing:2,alignItems:"center",children:[(0,o.jsx)(b.Z,{variant:"h2",component:"div",gutterBottom:!0,children:"Create To-Do Item"}),(0,o.jsx)(T.Z,{name:"id",label:"Id",variant:"outlined",color:"primary",value:t,onChange:t=>e(t.target.value)}),(0,o.jsx)(T.Z,{name:"title",label:"Title",variant:"outlined",value:n,onChange:t=>r(t.target.value)}),(0,o.jsx)(T.Z,{name:"description",label:"Description",variant:"outlined",value:s,onChange:t=>i(t.target.value)}),(0,o.jsx)(A.Z,{type:"submit",variant:"contained",children:"Create"})]})})}var B=n(2184),L=n(8498),N=n(7266),_=n(4414),R=n(270),F=n(7573),U=n(335),K=n(4696),J=n(1096),M=n(824),G=n(385);function q(t){let{open:e,handleClose:n,todoItem:r}=t,[s,i]=(0,c.useState)(r.title),[a,l]=(0,c.useState)(r.description),{todoItemController:d}=Z();return(0,o.jsxs)(J.Z,{open:e,children:[(0,o.jsx)(M.Z,{children:"Edit To-Do Item"}),(0,o.jsx)(G.Z,{children:(0,o.jsx)("form",{onSubmit:t=>{t.preventDefault(),t.stopPropagation(),r.title=s,r.description=a,d.update(r).then(t=>{t&&n()}),n()},children:(0,o.jsxs)(C.Z,{sx:{paddingBottom:2},spacing:2,alignItems:"center",children:[(0,o.jsx)(T.Z,{name:"title",label:"Title",variant:"outlined",value:s,onChange:t=>i(t.target.value)}),(0,o.jsx)(T.Z,{name:"description",label:"Description",variant:"outlined",value:a,onChange:t=>l(t.target.value)}),(0,o.jsx)(A.Z,{type:"submit",variant:"contained",children:"Update"})]})})})]})}function z(t){let{todoItem:e}=t,{todoItemController:n}=Z(),[r,s]=(0,c.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(R.Z,{sx:{mb:5,width:"100%"},children:[(0,o.jsx)(F.Z,{title:e.title,action:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(U.Z,{onClick:()=>s(!0),children:(0,o.jsx)(N.Z,{})}),(0,o.jsx)(U.Z,{onClick:()=>{n.delete(e)},children:(0,o.jsx)(_.Z,{})})]})}),(0,o.jsx)(K.Z,{children:(0,o.jsx)(b.Z,{variant:"body1",component:"div",gutterBottom:!0,children:e.description})})]}),r&&(0,o.jsx)(q,{open:r,handleClose:()=>s(!1),todoItem:e})]})}function H(t){let{todoItems:e}=t;return 0===e.length?(0,o.jsx)("div",{children:"No todo items"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(b.Z,{variant:"h2",component:"div",gutterBottom:!0,children:"To-Do Items"}),(0,o.jsx)(B.Z,{children:e.map(t=>(0,o.jsx)(L.ZP,{children:(0,o.jsx)(z,{todoItem:t})},t.id))})]})}function Q(){let{todoItemController:t}=Z(),[e,n]=(0,c.useState)([]),r=(0,c.useCallback)(()=>{t.findAll().then(t=>{n(t)})},[t,n]);return(0,c.useEffect)(()=>(r(),t.eventEmitter.on(i.CREATED,r),t.eventEmitter.on(i.DELETED,r),t.eventEmitter.on(i.UPDATED,r),()=>{t.eventEmitter.off(i.CREATED,r),t.eventEmitter.off(i.DELETED,r),t.eventEmitter.off(i.UPDATED,r)}),[t,r]),(0,o.jsxs)(S.Z,{sx:{mb:10},children:[(0,o.jsx)(b.Z,{variant:"h1",component:"div",gutterBottom:!0,children:"Todos"}),(0,o.jsx)("hr",{}),(0,o.jsx)(P,{}),(0,o.jsx)("hr",{}),(0,o.jsx)(H,{todoItems:e})]})}function V(){return(0,o.jsx)(D,{children:(0,o.jsx)(Q,{})})}}},function(t){t.O(0,[253,971,23,744],function(){return t(t.s=9144)}),_N_E=t.O()}]);